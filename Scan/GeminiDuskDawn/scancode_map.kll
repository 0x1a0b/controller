# Gemini Dusk/Dawn Base Configuration

Name = GeminiDuskDawn;
Version = 0.1;
Author = "HaaTa (Jacob Alexander) 2015-2018";
KLL = 0.5;

# Modified Date
Date = 2018-10-31;


# Function Row (1-19)
S1 : U"Esc";
S2 : U"F1";
S3 : U"F2";
S4 : U"F3";
S5 : U"F4";
S6 : U"F5";
S7 : U"F6";
S8 : U"F7";
S9 : U"F8";
S10 : U"F9";
S11 : U"F10";
S12 : U"F11";
S13 : U"F12";
S14 : None;
S15 : U"PrintScreen";
S16 : U"ScrollLock";
S17 : U"Pause";
S18 : None;
S19 : None;

# Number Row (20-38)
S20 : U"Backtick";
S21 : U"1";
S22 : U"2";
S23 : U"3";
S24 : U"4";
S25 : U"5";
S26 : U"6";
S27 : U"7";
S28 : U"8";
S29 : U"9";
S30 : U"0";
S31 : U"Minus";
S32 : U"Equals";
S33 : U"Backspace";
S34 : U"Insert";
S35 : U"Home";
S36 : U"PageUp";
S37 : None;
S38 : None;

# Top Alphabet Row (39-57)
S39 : U"Tab";
S40 : U"Q";
S41 : U"W";
S42 : U"E";
S43 : U"R";
S44 : U"T";
S45 : U"Y";
S46 : U"U";
S47 : U"I";
S48 : U"O";
S49 : U"P";
S50 : U"LBrace";
S51 : U"RBrace";
S52 : U"Backslash";
S53 : U"Delete";
S54 : U"End";
S55 : U"PageDown";
S56 : None;
S57 : None;

# Middle Alphabet Row (58-76)
S58 : U"CapsLock";
S59 : U"A";
S60 : U"S";
S61 : U"D";
S62 : U"F";
S63 : U"G";
S64 : U"H";
S65 : U"J";
S66 : U"K";
S67 : U"L";
S68 : U"Semicolon";
S69 : U"Quote";
S70 : None;
S71 : U"Enter";
S72 : None;
S73 : None;
S74 : None;
S75 : None;
S76 : None;

# Bottom Alphabet Row (77-95)
S77 : U"LShift";
S78 : None;
S79 : U"Z";
S80 : U"X";
S81 : U"C";
S82 : U"V";
S83 : U"B";
S84 : U"N";
S85 : U"M";
S86 : U"Comma";
S87 : U"Period";
S88 : U"Slash";
S89 : None;
S90 : U"RShift";
S91 : None;
S92 : U"Up";
S93 : None;
S94 : None;
S95 : None;

# Modifier Row (96-114)
S96 : U"LCtrl";
S97 : U"LGui";
S98 : U"LAlt";
S99 : None;
S100 : None;
S101 : U"Space";
S102 : None;
S103 : None;
S104 : None;
S105 : U"RAlt";
S106 : U"Function1";
S107 : U"RGui";
S108 : U"App";
S109 : U"RCtrl";
S110 : U"Left";
S111 : U"Down";
S112 : U"Right";
S113 : None;
S114 : None;


# Latency Resources
latencyResources = 10;


# Driver Chip
ISSI_Chip_31FL3733 = 1;

# Global Brightness
# 0xFF (255) is the max
ISSI_Global_Brightness = 128; # Half brightness

# Available ISSI Chips
ISSI_Chips = 2; # 2 by default

# I2C Buses
ISSI_I2C_Buses = 2; # 1 by default

# Chip:Bus Mapping
LED_MapCh1_Bus  = 0x0;
LED_MapCh1_Addr = ISSI_Ch1;
LED_MapCh2_Bus  = 0x1;
LED_MapCh2_Addr = ISSI_Ch1;

# Channel Optimizations
Pixel_HardCode_ChanWidth = 8;
Pixel_HardCode_Channels = 3;


# FPS Target
# Each ISSI chip setup has a different optimal framerate.
# This setting specifies a target frame rate. This is sort've like "V-Sync" on monitors.
# So the framerate will not go above this amount.
# If the framerate goes below, ledFPS cli will issue warnings when enabled.
ISSI_FrameRate_ms => ISSI_FrameRate_ms_define;
ISSI_FrameRate_ms = 10; # 1000 / <ISSI_FrameRate_ms> = 100 fps



### LED Default Enable Mask ###
# By default, all LEDs are enabled
# However, this may cause issuse with some led matrices, so it is recommended to disable unused positions
# Each LED is represented by a single bit
# See (http://www.issi.com/WW/pdf/31FL3733.pdf) for details
ISSILedMask1 = "
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, /* CS1 -> CS16 (SW1  -> SW4)  */
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, /* CS1 -> CS16 (SW5  -> SW8)  */
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, /* CS1 -> CS16 (SW9  -> SW12) */
";

ISSILedMask2 = "
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, /* CS1 -> CS16 (SW1  -> SW4)  */
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, /* CS1 -> CS16 (SW5  -> SW8)  */
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, /* CS1 -> CS16 (SW9  -> SW12) */
";



### Pixel Buffer Setup ###
# Defines channel mappings, changing the order will affect Pixel definitions
Pixel_Buffer_Size[]    =   0 192; # Starting channel for each buffer
Pixel_Buffer_Width[]   =  16  16; # Width of each channel buffer (may be different than effective channel size)
Pixel_Buffer_Length[]  = 192 192; # Length of each buffer (count, not bytes)
Pixel_Buffer_Buffer[0] = "LED_pageBuffer[0].buffer"; # Pointer to the start of the buffer
Pixel_Buffer_Buffer[1] = "LED_pageBuffer[1].buffer";

# I2C LED Struct Definition
LED_BufferStruct = "
typedef struct LED_Buffer {
	uint16_t i2c_addr;
	uint16_t reg_addr;
	uint16_t buffer[192];
} LED_Buffer;
volatile LED_Buffer LED_pageBuffer[ ISSI_Chips_define ];
";



### Pixel Display Mapping Parameters ###
Pixel_DisplayMapping_UnitSize = 19; # Default unit spacing in mm
Pixel_DisplayMapping_ColumnSize = 1;
Pixel_DisplayMapping_RowSize = 2;
Pixel_DisplayMapping_ColumnDirection = -1;
Pixel_DisplayMapping_RowDirection = 1;



### Pixel Mapping ###
# Organizes each of the channels into pixels (may, or may not be multi-channel)

# Function Row (1-17)
P[  1]( 16:8,   0:8,  32:8) : S1;
P[  2]( 17:8,   1:8,  33:8) : S2;
P[  3]( 18:8,   2:8,  34:8) : S3;
P[  4]( 19:8,   3:8,  35:8) : S4;
P[  5]( 20:8,   4:8,  36:8) : S5;
P[  6]( 21:8,   5:8,  37:8) : S6;
P[  7]( 22:8,   6:8,  38:8) : S7;
P[  8]( 23:8,   7:8,  39:8) : S8;
P[  9]( 24:8,   8:8,  40:8) : S9;
P[ 10]( 25:8,   9:8,  41:8) : S10;
P[ 11]( 26:8,  10:8,  42:8) : S11;
P[ 12]( 27:8,  11:8,  43:8) : S12;
P[ 13]( 28:8,  12:8,  44:8) : S13;
#P[ 14]( 29:8,  13:8,  45:8) : S14; # XXX (HaaTa): Not Used?
P[ 15]( 30:8,  14:8,  46:8) : S15;
P[ 16]( 31:8,  15:8,  47:8) : S16;
P[ 17](174:8, 158:8, 190:8) : S17;

# Number Row (18-34)
P[ 18]( 64:8,  48:8,  80:8) : S20;
P[ 19]( 65:8,  49:8,  81:8) : S21;
P[ 20]( 66:8,  50:8,  82:8) : S22;
P[ 21]( 67:8,  51:8,  83:8) : S23;
P[ 22]( 68:8,  52:8,  84:8) : S24;
P[ 23]( 69:8,  53:8,  85:8) : S25;
P[ 24]( 70:8,  54:8,  86:8) : S26;
P[ 25]( 71:8,  55:8,  87:8) : S27;
P[ 26]( 72:8,  56:8,  88:8) : S28;
P[ 27]( 73:8,  57:8,  89:8) : S29;
P[ 28]( 74:8,  58:8,  90:8) : S30;
P[ 29]( 75:8,  59:8,  91:8) : S31;
P[ 30]( 76:8,  60:8,  92:8) : S32;
P[ 31]( 77:8,  61:8,  93:8) : S33;
P[ 32]( 78:8,  62:8,  94:8) : S34;
P[ 33]( 79:8,  63:8,  95:8) : S35;
P[ 34](112:8,  96:8, 128:8) : S36; # TODO THESE CHANNELS ARE WRONG! PageUp

# Top Alpha Row (35-51)
P[ 35](112:8,  96:8, 128:8) : S39;
P[ 36](113:8,  97:8, 129:8) : S40;
P[ 37](114:8,  98:8, 130:8) : S41;
P[ 38](115:8,  99:8, 131:8) : S42;
P[ 39](116:8, 100:8, 132:8) : S43;
P[ 40](117:8, 101:8, 133:8) : S44;
P[ 41](118:8, 102:8, 134:8) : S45;
P[ 42](119:8, 103:8, 135:8) : S46;
P[ 43](120:8, 104:8, 136:8) : S47;
P[ 44](121:8, 105:8, 137:8) : S48;
P[ 45](122:8, 106:8, 138:8) : S49;
P[ 46](123:8, 107:8, 139:8) : S50;
P[ 47](124:8, 108:8, 140:8) : S51;
P[ 48](125:8, 109:8, 141:8) : S52;
P[ 49](126:8, 110:8, 142:8) : S53;
P[ 50](127:8, 111:8, 143:8) : S54;
P[ 51](160:8, 144:8, 176:8) : S55; # TODO THESE CHANNELS ARE WRONG! PageDn

# Mid Alpha Row (52-64)
P[ 52](160:8, 144:8, 176:8) : S58;
P[ 53](161:8, 145:8, 177:8) : S59;
P[ 54](162:8, 146:8, 178:8) : S60;
P[ 55](163:8, 147:8, 179:8) : S61;
P[ 56](164:8, 148:8, 180:8) : S62;
P[ 57](165:8, 149:8, 181:8) : S63;
P[ 58](166:8, 150:8, 182:8) : S64;
P[ 59](167:8, 151:8, 183:8) : S65;
P[ 60](168:8, 152:8, 184:8) : S66;
P[ 61](169:8, 153:8, 185:8) : S67;
P[ 62](170:8, 154:8, 186:8) : S68;
P[ 63](171:8, 155:8, 187:8) : S69;
P[ 64](173:8, 157:8, 189:8) : S71;

# Low Alpha Row (65-79)
P[ 65](175:8, 159:8, 191:8) : S77;
#P[ 66](208:8, 192:8, 224:8) : S78; # XXX (HaaTa) Unused?
P[ 67](209:8, 193:8, 225:8) : S79;
P[ 68](210:8, 194:8, 226:8) : S80;
P[ 69](211:8, 195:8, 227:8) : S81;
P[ 70](212:8, 196:8, 228:8) : S82;
P[ 71](213:8, 197:8, 229:8) : S83;
P[ 72](214:8, 198:8, 230:8) : S84;
P[ 73](215:8, 199:8, 231:8) : S85;
P[ 74](216:8, 200:8, 232:8) : S86;
P[ 75](217:8, 201:8, 233:8) : S87;
P[ 76](218:8, 202:8, 234:8) : S88;
#P[ 77](219:8, 203:8, 235:8) : S89; # XXX (HaaTa) Unused?
P[ 78](220:8, 204:8, 236:8) : S90;
#P[ 78](221:8, 205:8, 237:8) : S86; # TODO WHAT"S THIS FOR?! LD2_CS15, SW4, SW5, SW6
P[ 79](222:8, 206:8, 238:8) : S92;

# Mod Row (80-87)
P[ 80](223:8, 207:8, 239:8) : S96;
P[ 81](256:8, 240:8, 272:8) : S97;
P[ 82](257:8, 241:8, 273:8) : S98;
#P[ 83](258:8, 242:8, 274:8) : S99; # TODO WHAT"S? LD2_CS4, SW7, SW8, SW9
#P[ 84](259:8, 243:8, 275:8) : S100; # TODO WHAT"S? LD2_CS5, SW7, SW8, SW9
P[ 85](260:8, 244:8, 276:8) : S101;
#P[ 86](261:8, 245:8, 277:8) : S102; # TODO WHAT"S? LD2_CS7
#P[ 87](262:8, 246:8, 278:8) : S103; # TODO WHAT"S? LD2_CS8
#P[ 88](263:8, 247:8, 279:8) : S104; # TODO WHAT"S? LD2_CS9
P[ 89](264:8, 248:8, 280:8) : S105;
#P[ 90](265:8, 249:8, 281:8) : S106; # XXX (HaaTa) Unused?
P[ 91](266:8, 250:8, 282:8) : S107;
P[ 92](267:8, 251:8, 283:8) : S108;
P[ 93](268:8, 252:8, 284:8) : S109;
P[ 94](269:8, 253:8, 285:8) : S110;
P[ 95](270:8, 254:8, 286:8) : S111;
P[ 96](172:8, 156:8, 188:8) : S112;

# Underlighting (88-119)
#P[ 96](271:8, 255:8, 287:8) : None;
#P[ 97](304:8, 288:8, 320:8) : None;
#P[ 98](305:8, 289:8, 321:8) : None;
#P[ 99](306:8, 290:8, 322:8) : None;
#P[100](307:8, 291:8, 323:8) : None;
#P[101](308:8, 292:8, 324:8) : None;
#P[102](309:8, 293:8, 325:8) : None;
#P[103](310:8, 294:8, 326:8) : None;
#P[104](311:8, 295:8, 327:8) : None;
#P[105](312:8, 296:8, 328:8) : None;
#P[106](313:8, 297:8, 329:8) : None;
#P[107](314:8, 298:8, 330:8) : None;
#P[108](315:8, 299:8, 331:8) : None;
#P[109](316:8, 300:8, 332:8) : None;
#P[110](317:8, 301:8, 333:8) : None;
#P[111](318:8, 302:8, 334:8) : None;
#P[112](319:8, 303:8, 335:8) : None;
#P[113](352:8, 336:8, 368:8) : None;
#P[114](353:8, 337:8, 369:8) : None;
#P[115](354:8, 338:8, 370:8) : None;
#P[116](355:8, 339:8, 371:8) : None;
#P[117](356:8, 340:8, 372:8) : None;
#P[118](357:8, 341:8, 373:8) : None;
#P[119](358:8, 342:8, 374:8) : None;



### Physical Positions ###
# Rows

S[1-14,15-17]  <= y:0;
S[20-36] <= y:-28.575;
S[39-54] <= y:-47.625;
S[58-69,71] <= y:-66.675;
S[77,79-88,90,92] <= y:-85.725;
S[96-98,101,105-112] <= y:-104.775;

# Columns

S[ 1,20] <= x:0;      # Esc, Tilde
S[96]    <= x:2.38;   # Left Ctrl
S[39]    <= x:4.76;   # Tab
S[58]    <= x:7.14;   # Caps Lock
S[77]    <= x:11.9;   # Left Shift
S[21]    <= x:19.05;  # Number 1
S[97]    <= x:26.19;  # Left Win
S[40]    <= x:28.58;  # Q
S[59]    <= x:33.33;  # A
S[ 2,22] <= x:38.1;   # F1, Number 2
S[79]    <= x:42.85;  # Z
S[41]    <= x:47.63;  # W
S[98]    <= x:50.00;  # Left Alt
S[60]    <= x:52.39;  # S
S[ 3,23] <= x:57.15;  # F2, Number 3
S[80]    <= x:61.91;  # X
S[42]    <= x:66.68;  # E
S[61]    <= x:71.44;  # D
S[ 4,24] <= x:76.2;   # F3, Number 4
S[81]    <= x:80.96;  # C
S[43]    <= x:85.73;  # R
S[62]    <= x:90.49;  # F
S[ 5,25] <= x:95.25;  # F4, Number 5
S[82]    <= x:100.00; # V
S[44]    <= x:104.77; # T
S[63]    <= x:109.54; # G
S[26]    <= x:114.3;  # Number 6
S[83]    <= x:119.04; # B
S[101]   <= x:121.44; # Spacebar
S[ 6,45] <= x:123.83; # Y, F5
S[64]    <= x:128.60; # H
S[27]    <= x:133.35; # Number 7
S[84]    <= x:138.10; # N
S[ 7,46] <= x:142.88; # F6, U
S[65]    <= x:147.64; # J
S[28]    <= x:152.4;  # Number 8
S[85]    <= x:157.16; # M
S[ 8,47] <= x:161.93; # F7, I
S[66]    <= x:166.69; # K
S[29]    <= x:171.45; # Number 9
S[86]    <= x:176.21; # , <
S[ 9,48] <= x:180.98; # O, F8
S[67]    <= x:185.74; # L
S[30]    <= x:190.5;  # Number 0
S[105]   <= x:192.88; # Right alt
S[87]    <= x:195.26; # . >
S[49]    <= x:200.02; # P
S[68]    <= x:204.79; # ;
S[10,31] <= x:209.55; # -_, F9
S[88]    <= x:214.31; # /?
S[107]   <= x:216.69; # Right Win
S[50]    <= x:219.07; # [ {
S[69]    <= x:223.84; # ' "
S[11,32] <= x:228.6;  # F10, =+
S[51]    <= x:238.13; # ]}
S[108]   <= x:240.50; # Menu/Fn
S[12]    <= x:247.65; # F11
S[90]    <= x:250.03; # Right Shift
S[71]    <= x:254.06; # Enter
S[33]    <= x:257.17; # Backspace
S[52]    <= x:261.94; # \|
S[109]   <= x:264.32; # Right Ctrl
S[13]    <= x:266.7;  # F12

S[14,34,53,110]    <= x:295.275; # Print screen, Insert, Delete, Left arrow
S[15,35,54,92,111] <= x:314.33;  # Scroll lock, Home, End, Up arrow, Down arrow.
S[16,36,55,112]    <= x:333.375; # Pause break, Page up, Page down, Right Arrow.



#
# Stand-alone LEDs
# See section 8.5 for more details
# Also use the pcb numbers, syntax is almost the same
# P is for Pixel
#

## Corners
#P[104]  <= x:-7.81,  y:7.87;  # Top Left
#P[116] <= x:341.19, y:7.87;  # Top Right
#P[88] <= x:341.19, y:-112.52; # Bottom Right
#P[100] <= x:-7.81,  y:-112.52; # Bottom Left
#
## Top
#P[105-115] <= y:10.54;
#
## Right
#P[117-119] <= x:343.79;
#
## Bottom
#P[89-99]  <= y:-115.19;
#
## Left
#P[101-103] <= x:-10.41;
#
## Starting top left, working around the LED's all the way around in a circle
#P[105]  <= x:21.20;
#P[106]  <= x:50.29;
#P[107]  <= x:79.38;
#P[108]  <= x:108.45;
#P[109]  <= x:137.54;
#P[110]  <= x:166.62;
#P[111]  <= x:195.70;
#P[112]  <= x:224.79;
#P[113]  <= x:253.87;
#P[114]  <= x:282.95;
#P[115]  <= x:312.03;
#P[117] <= y:-22.23;
#P[118] <= y:-52.32;
#P[119] <= y:-82.42;
#P[89] <= x:312.04;
#P[90] <= x:282.96;
#P[91] <= x:253.87;
#P[92] <= x:224.79;
#P[93] <= x:195.71;
#P[94] <= x:166.62;
#P[95] <= x:137.54;
#P[96] <= x:108.46;
#P[97] <= x:79.38;
#P[98] <= x:50.29;
#P[99] <= x:21.21;
#P[101] <= y:-82.42;
#P[102] <= y:-52.32;
#P[103] <= y:-22.23;

